[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
loglevel=info
pidfile=/tmp/supervisord.pid
nodaemon=true
user=root

[program:uptime_kuma]
command=node server/server.js
directory=/app
priority=10

[program:signal-rest-api]
command=signal-cli-rest-api -signal-cli-config=/app/data/signal
environment=HOME="/home/node",USER="node"
priority=20

[program:tailscale]
command=/bin/sh -c 'tailscaled --state=/app/data/tailscaled.state --socket=/var/run/tailscale/tailscaled.sock; tailscale up --auth-key="${TAILSCALE_AUTHKEY}" --hostname=uptime-kuma'
priority=30